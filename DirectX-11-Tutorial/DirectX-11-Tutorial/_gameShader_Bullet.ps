// Шейдер теперь принимает на вход массив текстур
// Доступ к разным текстурам осуществляется посредством третьего параметра, передаваемого в семплер
//  Пример:
// float4 textureColor1 = myTextureArray.Sample(SampleType, float3(input.tex.x, input.tex.y, 0));
// float4 textureColor2 = myTextureArray.Sample(SampleType, float3(input.tex.x, input.tex.y, 1));

Texture2DArray myTextureArray;
SamplerState   SampleType;

struct PixelInputType
{
    float4 position  : SV_POSITION;
    float2 tex       : TEXCOORD0;
    float3 trailInfo : TEXCOORD2;
};



// Pixel Shader
float4 TexturePixelShader(PixelInputType input) : SV_TARGET
{
    float4 textureColor;

    // Рисуем след от пули
    if( input.trailInfo.z == 1.0f ) {

		if(input.tex.y < 0.25f || input.tex.y > 0.75f)
			return float4(1.0f, 1.0f, 1.0f, saturate(1.0f - input.tex.x - 0.4f)/2.0f);

		return float4(1.0f, 0.75f, 0.5f, saturate(1.0f - input.tex.x - 0.2f)/2.0f);
	}

    // Рисуем пулю
    textureColor = myTextureArray.Sample(SampleType, float3(input.tex.x, input.tex.y, input.trailInfo.z));

    return textureColor * float4(1.0f, 1.0f, 0.0f, 1.0f) * 2;
}
